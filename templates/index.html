{% extends "base.html" %} {% block title %}Start{% endblock %} {% block content%}
<h1 class="center_h1">Startsidan</h1>
<form action="/article_search" method="POST">
  <div class="mb-3">
    <label for="free_text" class="form-label">Skriv sökord</label>
    <input type="text" class="form-control search_by_title" id="free_text" name="free_text" aria-describedby="free_text_search" placeholder="Sök på vad du vill...">
  </div>
  <div class="mb-3">
    <select id="search_category_id" name="main_category" class="form-control">
      <option value=None selected="true" disabled>Välj kategori</option>
      <option value="">Alla</option>
      {%for category in main_categories%}
      <option value={{category[0]}}>{{category[1]}}</option>
      {%endfor%}
    </select>
  <div id="show_sub_categories"></div>
    <select id="city_id" name="city_id" class="form-control">
      <option value=None selected="true" disabled>Välj stad</option>
      <option value="">Alla</option>
      {%for city in cities%}
      <option value={{city[0]}}>{{city[1]}}</option>
      {%endfor%}
    </select>
  <input id="reset_search" type="reset" class="form-control" value="Rensa" aria-label="Username" aria-describedby="basic-addon1">
  <input type="submit" class="btn btn-primary search_button" value="Sök">
</form>
</div>
  <div class="conatiner-articles">
    <div class="row justify-content-md-center">
  {%for row in articles%}
      <div class="card mb-3" data-bs-toggle="collapse" data-bs-target="#collapseWidthExample{{row[0]}}" aria-expanded="false" aria-controls="collapseWidthExample">
        <div class="row g-0">
          {%for image in images%}
              {%if row[0] == image[1]%}
              <div class="col-md-4 pictures">
                <img src="/static/article_images/{{image[2]}}" id="temp_pic" class="img-fluid rounded-start" alt="Artikelbild">
              </div>
              {%endif%}
          {%endfor%}
          <div class="col-md-8">
            <div class="card-body article_body">
              <h2 class="card-title col-md-6 article_h2">{{row[2]}}</h2>
              <p class="col-md-6 article_p">Stad: {{row[23]}}</p>
              {%if row[25] == 1%}
                <p><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                </svg></p>
              {%elif row[25] == 2%}
                <p><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-trophy" viewBox="0 0 16 16">
                  <path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935zM3.504 1c.007.517.026 1.006.056 1.469.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.501.501 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667.03-.463.049-.952.056-1.469H3.504z"/>
                </svg></p>
              {%elif row[25] == 3%}
                <p><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-gem" viewBox="0 0 16 16">
                  <path d="M3.1.7a.5.5 0 0 1 .4-.2h9a.5.5 0 0 1 .4.2l2.976 3.974c.149.185.156.45.01.644L8.4 15.3a.5.5 0 0 1-.8 0L.1 5.3a.5.5 0 0 1 0-.6l3-4zm11.386 3.785-1.806-2.41-.776 2.413 2.582-.003zm-3.633.004.961-2.989H4.186l.963 2.995 5.704-.006zM5.47 5.495 8 13.366l2.532-7.876-5.062.005zm-1.371-.999-.78-2.422-1.818 2.425 2.598-.003zM1.499 5.5l5.113 6.817-2.192-6.82L1.5 5.5zm7.889 6.817 5.123-6.83-2.928.002-2.195 6.828z"/>
                </svg></p>
              {%endif%}
              <p class="col-md-6 article_p">Kategori: {{row[31]}}</p>
              <p class="card-text col-md-12 article_p"><small class="text-muted">Skapad: {{row[6].strftime('%Y-%m-%d')}}</small></p>
              <div class="collapse" id="collapseWidthExample{{row[0]}}">
                <p>{{row[3]}}</p>
                {%if row[1] != user_id%}
                  <form action="/wife_article_id" method="POST">
                    <input type="hidden" id="wife_article_id" name="wife_article_id" value={{row[0]}}>
                    <button  class="btn btn-primary show_intrest_button" type="submit">Visa intresse</button>
                  </form>
                {%endif%}
            {%endfor%}
            <div class="col-md-8">
              <div class="card-body article_body">
                <h2 class="card-title col-md-6 article_h2">{{row[2]}}</h2>
                <p class="col-md-6 article_p">Stad: {{row[23]}}</p>
                <p class="col-md-6 article_p">Prisnivå: {{row[26]}}</p>
                <p class="col-md-6 article_p">Kategori: {{row[31]}}</p>
                <p class="card-text col-md-12 article_p"><small class="text-muted">Skapad: {{row[6].strftime('%Y-%m-%d')}}</small></p>
                <div class="collapse" id="collapseWidthExample{{row[0]}}">
                  <p>{{row[3]}}</p>
                  {%if row[1] != user_id%}
                    <form action="/wife_article_id" method="POST">
                      <input type="hidden" id="wife_article_id" name="wife_article_id" value={{row[0]}}>
                      <button  class="btn btn-primary show_intrest_button" type="submit">Visa intresse</button>
                    </form>
                  {%endif%}
                </div>
              </div>
            </div>
          </div>
        </div>
    {%endfor%}
  </div>
</div>

<script>
    localStorage.clear();
</script>

<script type="text/javascript">
$(document).ready(function() {
 $('#search_category_id').change(function(){
    $.post("/get_child_categories", {
     parent_id: $('#search_category_id').val(),
    }, function(response){ 
        $('#show_sub_categories').html(response);
        $('#show_sub_categories').append(response.htmlresponse);
    });
    return false;
  });
});
</script>


{% endblock %}