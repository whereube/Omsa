{% extends "base.html" %} {% block title %}Skapa artikel{% endblock %} {% block content
    %}
<h1 class="center_h1">Skapa en artikel</h1>

<form class="was-validated" method="POST" action="/article_created" enctype=multipart/form-data id="create-art-form">
    
    <div class="mb-3">
        <h2 class="art-headers">Generell information</h2>
        <div class="col-md-12">
            <label for="validationServer01" class="form-label">Titel</label>
            <input type="text" class="form-control is-valid border-secondary" id="validationServer01" name="title" required>
        </div>

        <div class="mb-3">
            <label for="search_category_id" class="form-label">Välj kategori</label>
            <select class="form-select border-secondary" required aria-label="select example" name="main_category" id="search_category_id">
            <option value="">Kategori</option>
            {%for row in categories%}:
            <option value="{{row[0]}}">{{row[1]}}</option>
            {%endfor%}
            </select>
            <div id="show_sub_categories"></div>
        </div>
    </div>
    <div class="mb-3">
        <h2 class="art-headers"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
            <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>
            <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
          </svg> Plats</h2>
        <div class="mb-3">
            <select class="form-select border-secondary" required aria-label="select example" name="city">
            <option value="">Var finns varan?</option>
            {%for row in citys%}:
            <option value="{{row[0]}}">{{row[1]}}</option>
            {%endfor%}
            </select>
        </div>
        <div class="col-md-12 position-relative">
            <label for="validationTooltip05" class="form-label">Postnummer</label>
            <input type="text" class="form-control border-secondary" id="validationTooltip05" name="zip_code" pattern="[0-9]{5}" maxlength="5" required>
        </div>
    </div>

    <div class="mb-3">
        <label for="validationTextarea" class="form-label">Beskrivning</label>
        <textarea class="form-control is-invalid border-secondary" id="validationTextarea" name="description" placeholder="Ju mer detaljer desto bättre!" required></textarea>
    </div>

    <div class="mb-3">
        <h2 class="art-headers">Bild</h2>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-filetype-jpg" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5Zm-4.34 8.132c.076.153.123.317.14.492h-.776a.797.797 0 0 0-.097-.249.689.689 0 0 0-.17-.19.707.707 0 0 0-.237-.126.96.96 0 0 0-.299-.044c-.285 0-.507.1-.665.302-.156.201-.234.484-.234.85v.498c0 .234.032.439.097.615a.881.881 0 0 0 .304.413.87.87 0 0 0 .519.146.967.967 0 0 0 .457-.096.67.67 0 0 0 .272-.264c.06-.11.091-.23.091-.363v-.255H8.24v-.59h1.576v.798c0 .193-.032.377-.097.55a1.29 1.29 0 0 1-.293.458 1.37 1.37 0 0 1-.495.313c-.197.074-.43.111-.697.111a1.98 1.98 0 0 1-.753-.132 1.447 1.447 0 0 1-.533-.377 1.58 1.58 0 0 1-.32-.58 2.482 2.482 0 0 1-.105-.745v-.506c0-.362.066-.678.2-.95.134-.271.328-.482.582-.633.256-.152.565-.228.926-.228.238 0 .45.033.636.1.187.066.347.158.48.275.133.117.238.253.314.407ZM0 14.786c0 .164.027.319.082.465.055.147.136.277.243.39.11.113.245.202.407.267.164.062.354.093.569.093.42 0 .748-.115.984-.345.238-.23.358-.566.358-1.005v-2.725h-.791v2.745c0 .202-.046.357-.138.466-.092.11-.233.164-.422.164a.499.499 0 0 1-.454-.246.577.577 0 0 1-.073-.27H0Zm4.92-2.86H3.322v4h.791v-1.343h.803c.287 0 .531-.057.732-.172.203-.118.358-.276.463-.475.108-.201.161-.427.161-.677 0-.25-.052-.475-.158-.677a1.176 1.176 0 0 0-.46-.477c-.2-.12-.443-.179-.732-.179Zm.546 1.333a.795.795 0 0 1-.085.381.574.574 0 0 1-.238.24.794.794 0 0 1-.375.082H4.11v-1.406h.66c.218 0 .389.06.512.182.123.12.185.295.185.521Z"/>
        </svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-filetype-png" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5Zm-3.76 8.132c.076.153.123.317.14.492h-.776a.797.797 0 0 0-.097-.249.689.689 0 0 0-.17-.19.707.707 0 0 0-.237-.126.96.96 0 0 0-.299-.044c-.285 0-.506.1-.665.302-.156.201-.234.484-.234.85v.498c0 .234.032.439.097.615a.881.881 0 0 0 .304.413.87.87 0 0 0 .519.146.967.967 0 0 0 .457-.096.67.67 0 0 0 .272-.264c.06-.11.091-.23.091-.363v-.255H8.82v-.59h1.576v.798c0 .193-.032.377-.097.55a1.29 1.29 0 0 1-.293.458 1.37 1.37 0 0 1-.495.313c-.197.074-.43.111-.697.111a1.98 1.98 0 0 1-.753-.132 1.447 1.447 0 0 1-.533-.377 1.58 1.58 0 0 1-.32-.58 2.482 2.482 0 0 1-.105-.745v-.506c0-.362.067-.678.2-.95.134-.271.328-.482.582-.633.256-.152.565-.228.926-.228.238 0 .45.033.636.1.187.066.348.158.48.275.133.117.238.253.314.407Zm-8.64-.706H0v4h.791v-1.343h.803c.287 0 .531-.057.732-.172.203-.118.358-.276.463-.475a1.42 1.42 0 0 0 .161-.677c0-.25-.053-.475-.158-.677a1.176 1.176 0 0 0-.46-.477c-.2-.12-.443-.179-.732-.179Zm.545 1.333a.795.795 0 0 1-.085.381.574.574 0 0 1-.238.24.794.794 0 0 1-.375.082H.788v-1.406h.66c.218 0 .389.06.512.182.123.12.185.295.185.521Zm1.964 2.666V13.25h.032l1.761 2.675h.656v-3.999h-.75v2.66h-.032l-1.752-2.66h-.662v4h.747Z"/>
          </svg>
        <div class="mb-3">
        <input type="file" class="form-control border-secondary" aria-label="file example" name=file required>
        </div>
    </div>

    <div id="tier-big-box">
        <div class="mb-3">
            <h2 class="art-headers">Pris-tier</h2>
            {%for row in tiers%}
                {%if row[1] == 1%}
                <div class="form-check"> 
                    <input type="radio" class="form-check-input border-secondary" id="validationFormCheck2" name="tier" value="{{row[0]}}" required>
                    <label class="form-check-label" for="validationFormCheck2"><img src="/static/img/bin.png" class="tier-icons" alt="Bin"></label>
                </div>
                {%elif row[1] == 2%}
                <div class="form-check"> 
                    <input type="radio" class="form-check-input border-secondary" id="validationFormCheck2" name="tier" value="{{row[0]}}" required>
                    <label class="form-check-label" for="validationFormCheck2"><img src="/static/img/pizza.png" class="tier-icons" alt="Pizza"></label>
                </div>
                {%elif row[1] == 3%}
                <div class="form-check"> 
                    <input type="radio" class="form-check-input border-secondary" id="validationFormCheck2" name="tier" value="{{row[0]}}" required>
                    <label class="form-check-label" for="validationFormCheck2"><img src="/static/img/diamond.png" class="tier-icons" alt="Diamond"></label>
                </div>
                {%elif row[1] == 4%}
                <div class="form-check"> 
                    <input type="radio" class="form-check-input border-secondary" id="validationFormCheck2" name="tier" value="{{row[0]}}" required>
                    <label class="form-check-label" for="validationFormCheck2"><img src="/static/img/handshake.png" class="tier-icons" alt="Handshake"></label>
                </div>
                {%endif%}
            {%endfor%}
        </div>

        <div class="tier-info-box">
            <h3 class="head-info-box">Nivåsystem</h3>
            <div class="tier-box">
                <img src="/static/img/bin.png" class="tier-icons-info" alt="Bin">
                <p>Skräp - En hård beskrivning kanske, men one man's trash is antoher man's treasure!</p>
            </div>

            <div class="tier-box">
                <img src="/static/img/pizza.png" class="tier-icons-info" alt="Pizza">
                <p>Halv pizza - En halv pizza är bättre än ingen pizza alls.</p>
            </div>

            <div class="tier-box">
                <img src="/static/img/diamond.png" class="tier-icons-info" alt="Diamond">
                <p>Diamant - Förklarar nästan sig självt va? Var bara försiktig så du inte skrämmer iväg den snåle!</p>
            </div>

            <div class="tier-box">
                <img src="/static/img/handshake.png" class="tier-icons-info" alt="Handshake">
                <p>Handslag - Att byta bort en vara mot ett handslag innebär att du är villig att bli av med varan utan att få något i utbyte (förutom ett handslag förstås).</p>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <button class="btn btn-primary" type="submit" id="submit-btn">Lägg upp</button>
    </div>
</form>

<script type="text/javascript">
$(document).ready(function() {
 $('#search_category_id').change(function(){
    $.post("/get_child_categories", {
     parent_id: $('#search_category_id').val(),
    }, function(response){ 
        $('#show_sub_categories').html(response);
        $('#show_sub_categories').append(response.htmlresponse);
    });
    return false;
  });
}); 
</script>
{% endblock %}
